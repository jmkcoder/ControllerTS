{# Pagination Partial #}
{% if totalPages > 1 %}
<nav class="pagination-wrapper" style="margin: 20px 0; text-align: center;">
  <div class="pagination" style="display: inline-flex; list-style: none; padding: 0; margin: 0; border-radius: 4px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
    
    {# Previous button #}
    {% if currentPage > 1 %}
      <a href="{{ baseUrl }}?{{ queryParam or 'page' }}={{ currentPage - 1 }}{% if otherParams %}{% for key, value in otherParams %}&{{ key }}={{ value }}{% endfor %}{% endif %}" 
         class="page-link" 
         style="padding: 8px 12px; background: #fff; color: #007bff; text-decoration: none; border: 1px solid #dee2e6; border-right: none;">
        ‹ Previous
      </a>
    {% else %}
      <span class="page-link disabled" style="padding: 8px 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #dee2e6; border-right: none;">
        ‹ Previous
      </span>
    {% endif %}

    {# Page numbers #}
    {% set startPage = [1, currentPage - 2] | max %}
    {% set endPage = [totalPages, currentPage + 2] | min %}
    
    {% if startPage > 1 %}
      <a href="{{ baseUrl }}?{{ queryParam or 'page' }}=1{% if otherParams %}{% for key, value in otherParams %}&{{ key }}={{ value }}{% endfor %}{% endif %}" 
         class="page-link" 
         style="padding: 8px 12px; background: #fff; color: #007bff; text-decoration: none; border: 1px solid #dee2e6; border-right: none;">1</a>
      {% if startPage > 2 %}
        <span class="page-link" style="padding: 8px 12px; background: #fff; color: #6c757d; border: 1px solid #dee2e6; border-right: none;">...</span>
      {% endif %}
    {% endif %}

    {% for page in range(startPage, endPage + 1) %}
      {% if page == currentPage %}
        <span class="page-link active" style="padding: 8px 12px; background: #007bff; color: white; border: 1px solid #007bff; border-right: none;">{{ page }}</span>
      {% else %}
        <a href="{{ baseUrl }}?{{ queryParam or 'page' }}={{ page }}{% if otherParams %}{% for key, value in otherParams %}&{{ key }}={{ value }}{% endfor %}{% endif %}" 
           class="page-link" 
           style="padding: 8px 12px; background: #fff; color: #007bff; text-decoration: none; border: 1px solid #dee2e6; border-right: none;">{{ page }}</a>
      {% endif %}
    {% endfor %}

    {% if endPage < totalPages %}
      {% if endPage < totalPages - 1 %}
        <span class="page-link" style="padding: 8px 12px; background: #fff; color: #6c757d; border: 1px solid #dee2e6; border-right: none;">...</span>
      {% endif %}
      <a href="{{ baseUrl }}?{{ queryParam or 'page' }}={{ totalPages }}{% if otherParams %}{% for key, value in otherParams %}&{{ key }}={{ value }}{% endfor %}{% endif %}" 
         class="page-link" 
         style="padding: 8px 12px; background: #fff; color: #007bff; text-decoration: none; border: 1px solid #dee2e6; border-right: none;">{{ totalPages }}</a>
    {% endif %}

    {# Next button #}
    {% if currentPage < totalPages %}
      <a href="{{ baseUrl }}?{{ queryParam or 'page' }}={{ currentPage + 1 }}{% if otherParams %}{% for key, value in otherParams %}&{{ key }}={{ value }}{% endfor %}{% endif %}" 
         class="page-link" 
         style="padding: 8px 12px; background: #fff; color: #007bff; text-decoration: none; border: 1px solid #dee2e6;">
        Next ›
      </a>
    {% else %}
      <span class="page-link disabled" style="padding: 8px 12px; background: #f8f9fa; color: #6c757d; border: 1px solid #dee2e6;">
        Next ›
      </span>
    {% endif %}
  </div>
  
  <div class="pagination-info" style="margin-top: 10px; color: #6c757d; font-size: 0.9em;">
    Showing {{ ((currentPage - 1) * itemsPerPage) + 1 }} to {{ [currentPage * itemsPerPage, totalItems] | min }} of {{ totalItems }} results
  </div>
</nav>
{% endif %}
